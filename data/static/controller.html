<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </html>
    <body>
        <button class="controllerButton" id="buttonUp">Up</button>
        <button class="controllerButton" id="buttonDown">Down</button>
        <button class="controllerButton" id="buttonLeft">Left</button>
        <button class="controllerButton" id="buttonRight">Right</button>
        <button class="controllerButton" id="buttonA">A</button>
        <button class="controllerButton" id="buttonB">B</button>
        <button class="controllerButton" id="buttonX">X</button>
        <button class="controllerButton" id="buttonY">Y</button>
    </body>
</html>

<script>
    buttons = document.getElementsByClassName('controllerButton')
    for (var i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener('mouseup', function(e) {
            setButtonValue(e.target.id, 'false')
        });
        buttons[i].addEventListener('mousedown', function(e) {
            setButtonValue(e.target.id, 'true')
        });
    }

    function setButtonValue(buttonName, buttonValue) {
        console.log(buttonName + ': ' + buttonValue)
        url = '/setvar/'+buttonName+'/'+buttonValue
        //Make a no cache fetch
        fetch(url, {cache: 'no-cache'})
    }
</script>